{"ast":null,"code":"var _jsxFileName = \"/home/tedroox/E-commerce/src/App.js\";\nimport React from 'react';\nimport Cart from './Cart';\nimport Navbar from './Navbar';\nimport { firestore } from 'firebase';\nimport * as firebase from 'firebase';\nimport \"./CartItems.css\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.handleIncreaseQuantity = product => {\n      console.log('Heyy please inc the qty of ', product);\n      const {\n        products\n      } = this.state;\n      const index = products.indexOf(product);\n      const docRef = this.db.collection('products').doc(products[index].id);\n      docRef.update({\n        qty: products[index].qty + 1\n      }).then(() => {\n        console.log('updated successfully');\n      }).catch(error => {\n        console.log('Error', error);\n      });\n    };\n\n    this.handleDecreaseQuantity = product => {\n      console.log('Heyy please inc the qty of ', product);\n      const {\n        products\n      } = this.state;\n      const index = products.indexOf(product);\n\n      if (products[index].qty === 0) {\n        return;\n      }\n\n      const docRef = this.db.collection('products').doc(products[index].id);\n      docRef.update({\n        qty: products[index].qty - 1\n      }).then(() => {\n        console.log('updated successfully');\n      }).catch(error => {\n        console.log('Error', error);\n      });\n    };\n\n    this.handleDeleteProduct = id => {\n      const {\n        products\n      } = this.state;\n      const docRef = this.db.collection('products').doc(id);\n      docRef.delete().then(() => {\n        console.log('deleted successfully');\n      }).catch(error => {\n        console.log('Error', error);\n      });\n    };\n\n    this.getCartCount = () => {\n      const {\n        products\n      } = this.state;\n      let count = 0;\n      count = products.length;\n      console.log(\"products details :\", products.length);\n      return count;\n    };\n\n    this.getCartTotal = () => {\n      const {\n        products\n      } = this.state;\n      let cartTotal = 0;\n      products.map(product => {\n        cartTotal = cartTotal + product.qty * product.price;\n        return '';\n      });\n      return cartTotal;\n    };\n\n    this.addProduct = () => {\n      this.db.collection('products').add({\n        img: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQAHVNHGvtApRyinluTLOmmH9mPJ9eMLahREQ&usqp=CAU',\n        qty: '1',\n        price: '1000',\n        title: 'mobile',\n        discription: 'Samsung Galaxy S21 (128GB ROM, 8GB RAM, SM-G991BZVDINU, Phantom Violet)'\n      }).then(docRef => {\n        console.log(\"product has been added\", docRef);\n      }).catch(error => {\n        console.log(\"Error:\", error);\n      });\n    };\n\n    this.state = {\n      products: [],\n      loading: true\n    };\n    this.db = firebase.firestore();\n  }\n\n  componentDidMount() {\n    this.db.collection('products').onSnapshot(snapshot => {\n      console.log(\"queryshot\");\n      snapshot.docs.map(doc => {\n        console.log(doc.data());\n      });\n      const products = snapshot.docs.map(doc => {\n        const data = doc.data();\n        data['id'] = doc.id;\n        return data;\n      });\n      this.setState({\n        products,\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      products,\n      loading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      count: this.getCartCount(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Cart, {\n      products: products,\n      onIncreaseQuantity: this.handleIncreaseQuantity,\n      onDecreaseQuantity: this.handleDecreaseQuantity,\n      onDeleteProduct: this.handleDeleteProduct,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }\n    }), loading && /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    }, \"this is loading.......\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, \"If you want to add more product from here,you need to click on this button.\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.addProduct,\n      className: \"add-product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }, \"Add product\"));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/tedroox/E-commerce/src/App.js"],"names":["React","Cart","Navbar","firestore","firebase","App","Component","constructor","handleIncreaseQuantity","product","console","log","products","state","index","indexOf","docRef","db","collection","doc","id","update","qty","then","catch","error","handleDecreaseQuantity","handleDeleteProduct","delete","getCartCount","count","length","getCartTotal","cartTotal","map","price","addProduct","add","img","title","discription","loading","componentDidMount","onSnapshot","snapshot","docs","data","setState","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Cart from './Cart';\nimport Navbar from './Navbar';\nimport { firestore } from 'firebase';\nimport * as firebase from 'firebase';\nimport \"./CartItems.css\";\n\nclass App extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      products: [],\n      loading: true\n    }\n    this.db=firebase.firestore();\n  }\n\n  componentDidMount() {\n    this.db\n      .collection('products')\n      .onSnapshot((snapshot)=>{\n        console.log(\"queryshot\");\n    \n        snapshot.docs.map((doc)=>{\n          console.log(doc.data());\n        })\n        const products=snapshot.docs.map((doc)=>{\n          const data=doc.data();\n          data['id']=doc.id;\n          return data;\n        })\n        this.setState({\n          products,\n          loading:false \n        })\n            })\n\n  };\n  handleIncreaseQuantity = (product) => {\n    console.log('Heyy please inc the qty of ', product);\n    const { products } = this.state;\n    const index = products.indexOf(product);\n    const docRef=this.db.collection('products').doc(products[index].id);\n    docRef\n    .update({\n      qty:products[index].qty+1\n    })\n    .then(()=>{\n      console.log('updated successfully');\n    })\n    .catch((error)=>{\n      console.log('Error',error);\n    });\n  }\n  handleDecreaseQuantity = (product) => {\n    console.log('Heyy please inc the qty of ', product);\n    const { products } = this.state;\n    const index = products.indexOf(product);\n\n    if (products[index].qty === 0) {\n      return;\n    }\n    const docRef=this.db.collection('products').doc(products[index].id);\n    docRef\n    .update({\n      qty:products[index].qty-1\n    })\n    .then(()=>{\n      console.log('updated successfully');\n    })\n    .catch((error)=>{\n      console.log('Error',error);\n    });\n  }\n  handleDeleteProduct = (id) => {\n    const { products } = this.state;\n    const docRef=this.db.collection('products').doc(id);\n    docRef\n    .delete()\n    .then(()=>{\n      console.log('deleted successfully');\n    })\n    .catch((error)=>{\n      console.log('Error',error);\n    });\n  }\n\n  getCartCount = () => {\n    const { products } = this.state;\n    let count = 0;\n    count=products.length;\n    console.log(\"products details :\",products.length);\n    return count;\n  }\n\n  getCartTotal = () => {\n    const { products } = this.state;\n\n    let cartTotal = 0;\n\n    products.map((product) => {\n      cartTotal = cartTotal + product.qty * product.price\n      return '';\n    })\n\n    return cartTotal;\n  }\n  addProduct=()=>{\n    this.db\n    .collection('products')\n    .add({\n      img:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQAHVNHGvtApRyinluTLOmmH9mPJ9eMLahREQ&usqp=CAU',\n      qty:'1',\n      price:'1000',\n      title:'mobile',\n      discription:'Samsung Galaxy S21 (128GB ROM, 8GB RAM, SM-G991BZVDINU, Phantom Violet)',\n    })\n    .then((docRef)=>{\n      console.log(\"product has been added\",docRef);\n    })\n    .catch((error)=>{\n      console.log(\"Error:\",error);\n    })\n  }\n  render() {\n    const { products, loading } = this.state;\n    return (\n      <div className=\"App\">\n        <Navbar count={this.getCartCount()} />\n      \n       \n        <Cart\n          products={products}\n          onIncreaseQuantity={this.handleIncreaseQuantity}\n          onDecreaseQuantity={this.handleDecreaseQuantity}\n          onDeleteProduct={this.handleDeleteProduct}\n        />\n        {loading && <h5>this is loading.......</h5>}\n        {/* <div style={{ padding: 10, fontSize: 20 }}>TOTAL: {this.getCartTotal()} </div> */}\n        <div className=\"product-text\">If you want to add more product from here,you need to click on this button.</div>\n        <button onClick={this.addProduct}  className=\"add-product\">Add product</button>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}