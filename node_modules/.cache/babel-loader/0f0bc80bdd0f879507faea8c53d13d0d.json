{"ast":null,"code":"var _jsxFileName = \"/home/tedroox/Final_cart_Project_Firebase/src/App.js\";\nimport React from 'react';\nimport Cart from './Cart';\nimport Navbar from './Navbar';\nimport { firestore } from 'firebase';\nimport * as firebase from 'firebase';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.handleIncreaseQuantity = product => {\n      console.log('Heyy please inc the qty of ', product);\n      const {\n        products\n      } = this.state;\n      const index = products.indexOf(product); // products[index].qty += 1;\n      // this.setState({\n      //   products\n      // })\n\n      const docRef = this.db.collection('products').doc(products[index].id);\n      docRef.update({\n        qty: products[index].qty + 1\n      }).then(() => {\n        console.log('updated successfully');\n      }).catch(error => {\n        console.log('Error', error);\n      });\n    };\n\n    this.handleDecreaseQuantity = product => {\n      console.log('Heyy please inc the qty of ', product);\n      const {\n        products\n      } = this.state;\n      const index = products.indexOf(product);\n\n      if (products[index].qty === 0) {\n        return;\n      } // products[index].qty -= 1;\n      // this.setState({\n      //   products,\n      // })\n\n\n      const docRef = this.db.collection('products').doc(products[index].id);\n      docRef.update({\n        qty: products[index].qty - 1\n      }).then(() => {\n        console.log('updated successfully');\n      }).catch(error => {\n        console.log('Error', error);\n      });\n    };\n\n    this.handleDeleteProduct = id => {\n      const {\n        products\n      } = this.state; //const items = products.filter((item) => item.id !== id); // [{}]\n      // this.setState({\n      //   products: items\n      // })\n\n      const docRef = this.db.collection('products').doc(id);\n      docRef.delete().then(() => {\n        console.log('deleted successfully');\n      }).catch(error => {\n        console.log('Error', error);\n      });\n    };\n\n    this.getCartCount = () => {\n      const {\n        products\n      } = this.state;\n      let count = 0;\n      products.forEach(product => {\n        count += product.qty;\n      });\n      return count;\n    };\n\n    this.getCartTotal = () => {\n      const {\n        products\n      } = this.state;\n      let cartTotal = 0;\n      products.map(product => {\n        cartTotal = cartTotal + product.qty * product.price;\n        return '';\n      });\n      return cartTotal;\n    };\n\n    this.addProduct = () => {\n      this.db.collection('products').add({\n        img: '',\n        qty: '1',\n        price: '100',\n        title: 'mobile'\n      }).then(docRef => {\n        console.log(\"product has been added\", docRef);\n      }).catch(error => {\n        console.log(\"Error:\", error);\n      });\n    };\n\n    this.state = {\n      products: [],\n      loading: true\n    };\n    this.db = firebase.firestore(); // this.increaseQuantity = this.increaseQuantity.bind(this);\n    // this.testing();\n  }\n\n  componentDidMount() {\n    //     firebase\n    //     .firestore()\n    //     .collection('products')\n    //     .get()\n    //     .then((snapshot)=>{\n    // console.log(\"queryshot\");\n    // snapshot.docs.map((doc)=>{\n    //   console.log(doc.data());\n    // })\n    // const products=snapshot.docs.map((doc)=>{\n    //   const data=doc.data();\n    //   data['id']=doc.id;\n    //   return data;\n    // })\n    // this.setState({\n    //   products,\n    //   loading:false \n    // })\n    //     })\n    this.db.collection('products').onSnapshot(snapshot => {\n      console.log(\"queryshot\");\n      snapshot.docs.map(doc => {\n        console.log(doc.data());\n      });\n      const products = snapshot.docs.map(doc => {\n        const data = doc.data();\n        data['id'] = doc.id;\n        return data;\n      });\n      this.setState({\n        products,\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      products,\n      loading\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      count: this.getCartCount(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.addProduct,\n      style: {\n        padding: 20,\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }\n    }, \"Add product\"), /*#__PURE__*/React.createElement(Cart, {\n      products: products,\n      onIncreaseQuantity: this.handleIncreaseQuantity,\n      onDecreaseQuantity: this.handleDecreaseQuantity,\n      onDeleteProduct: this.handleDeleteProduct,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }\n    }), loading && /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }, \"this is loading.......\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: 10,\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }, \"TOTAL: \", this.getCartTotal(), \" \"));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/tedroox/Final_cart_Project_Firebase/src/App.js"],"names":["React","Cart","Navbar","firestore","firebase","App","Component","constructor","handleIncreaseQuantity","product","console","log","products","state","index","indexOf","docRef","db","collection","doc","id","update","qty","then","catch","error","handleDecreaseQuantity","handleDeleteProduct","delete","getCartCount","count","forEach","getCartTotal","cartTotal","map","price","addProduct","add","img","title","loading","componentDidMount","onSnapshot","snapshot","docs","data","setState","render","padding","fontSize"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Cart from './Cart';\nimport Navbar from './Navbar';\nimport { firestore } from 'firebase';\nimport * as firebase from 'firebase';\n\nclass App extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      products: [],\n      loading: true\n    }\n    this.db=firebase.firestore();\n    // this.increaseQuantity = this.increaseQuantity.bind(this);\n    // this.testing();\n  }\n\n  componentDidMount() {\n    //     firebase\n    //     .firestore()\n    //     .collection('products')\n    //     .get()\n    //     .then((snapshot)=>{\n    // console.log(\"queryshot\");\n\n    // snapshot.docs.map((doc)=>{\n    //   console.log(doc.data());\n    // })\n    // const products=snapshot.docs.map((doc)=>{\n    //   const data=doc.data();\n    //   data['id']=doc.id;\n    //   return data;\n    // })\n    // this.setState({\n    //   products,\n    //   loading:false \n    // })\n    //     })\n\n\n    this.db\n      .collection('products')\n      .onSnapshot((snapshot)=>{\n        console.log(\"queryshot\");\n    \n        snapshot.docs.map((doc)=>{\n          console.log(doc.data());\n        })\n        const products=snapshot.docs.map((doc)=>{\n          const data=doc.data();\n          data['id']=doc.id;\n          return data;\n        })\n        this.setState({\n          products,\n          loading:false \n        })\n            })\n\n  };\n  handleIncreaseQuantity = (product) => {\n    console.log('Heyy please inc the qty of ', product);\n    const { products } = this.state;\n    const index = products.indexOf(product);\n\n    // products[index].qty += 1;\n\n    // this.setState({\n    //   products\n    // })\n    const docRef=this.db.collection('products').doc(products[index].id);\n    docRef\n    .update({\n      qty:products[index].qty+1\n    })\n    .then(()=>{\n      console.log('updated successfully');\n    })\n    .catch((error)=>{\n      console.log('Error',error);\n    });\n  }\n  handleDecreaseQuantity = (product) => {\n    console.log('Heyy please inc the qty of ', product);\n    const { products } = this.state;\n    const index = products.indexOf(product);\n\n    if (products[index].qty === 0) {\n      return;\n    }\n\n    // products[index].qty -= 1;\n\n    // this.setState({\n    //   products,\n\n    // })\n    const docRef=this.db.collection('products').doc(products[index].id);\n    docRef\n    .update({\n      qty:products[index].qty-1\n    })\n    .then(()=>{\n      console.log('updated successfully');\n    })\n    .catch((error)=>{\n      console.log('Error',error);\n    });\n  }\n  handleDeleteProduct = (id) => {\n    const { products } = this.state;\n\n    //const items = products.filter((item) => item.id !== id); // [{}]\n\n    // this.setState({\n    //   products: items\n    // })\n    const docRef=this.db.collection('products').doc(id);\n    docRef\n    .delete()\n    .then(()=>{\n      console.log('deleted successfully');\n    })\n    .catch((error)=>{\n      console.log('Error',error);\n    });\n  }\n\n  getCartCount = () => {\n    const { products } = this.state;\n\n    let count = 0;\n\n    products.forEach((product) => {\n      count += product.qty;\n    })\n\n    return count;\n  }\n\n  getCartTotal = () => {\n    const { products } = this.state;\n\n    let cartTotal = 0;\n\n    products.map((product) => {\n      cartTotal = cartTotal + product.qty * product.price\n      return '';\n    })\n\n    return cartTotal;\n  }\n  addProduct=()=>{\n    this.db\n    .collection('products')\n    .add({\n      img:'',\n      qty:'1',\n      price:'100',\n      title:'mobile'\n    })\n    .then((docRef)=>{\n      console.log(\"product has been added\",docRef);\n    })\n    .catch((error)=>{\n      console.log(\"Error:\",error);\n    })\n  }\n  render() {\n    const { products, loading } = this.state;\n    return (\n      <div className=\"App\">\n        <Navbar count={this.getCartCount()} />\n        <button onClick={this.addProduct} style={{padding:20,fontSize:20}}>Add product</button>\n        <Cart\n          products={products}\n          onIncreaseQuantity={this.handleIncreaseQuantity}\n          onDecreaseQuantity={this.handleDecreaseQuantity}\n          onDeleteProduct={this.handleDeleteProduct}\n        />\n        {loading && <h1>this is loading.......</h1>}\n        <div style={{ padding: 10, fontSize: 20 }}>TOTAL: {this.getCartTotal()} </div>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}